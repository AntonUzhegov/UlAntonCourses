<!DOCTYPE html>

<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Ulton - Все курсы</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&amp;display=swap" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon"/>
</head>
<body>
<header>
    <nav>
        <ul class="left-menu">
            <li class="menu-item"><a href="/hello">Главная</a></li>
            <li class="menu-item menu-item-active"><a href="#">Каталог курсов</a></li>
            <li class="menu-item"><a href="#">Контакты</a></li>
            <li class="menu-item"><a href="/about">О нас</a></li>

            <span class="menu-underline no-anim" aria-hidden="true"></span>
        </ul>
    </nav>
    <div class="logo">Ul<span class="logo-accent">ton</span></div> <nav>
    <ul class="right-menu">
        <li class="menu-item login-btn"><a href="#">Войти</a></li>
    </ul>
</nav>
</header>
<main>
    <div class="content-container">
        <h1>Каталог <span class="it-accent">курсов</span></h1>
        <div class="course-list">
            <a class="course-card"
               th:each="c : ${courses}"
               th:href="@{/courses/{slug}(slug=${c.slug})}"
               th:attr="aria-label=${'Открыть курс ' + c.title}">

                <div class="course-card__left">
                    <div class="course-card__badge" th:text="${c.badge}">Base</div>

                    <div class="course-card__title" th:text="${c.title}">Java для начинающих</div>

                    <div class="course-card__meta">
                        <span class="course-card__meta-item" th:text="${c.durationWeeks + ' недель'}">8 недель</span>
                        <span class="course-card__dot">•</span>
                        <span class="course-card__meta-item" th:text="${c.lessonsCount + ' уроков'}">20 уроков</span>
                    </div>

                    <div class="course-card__desc" th:text="${c.shortDescription}">
                        Описание курса
                    </div>
                </div>

                <div class="course-card__right">
                    <div class="course-card__stats">
                        <div class="course-card__stat">
                            <div class="course-card__stat-label">Сложность</div>
                            <div class="course-card__stat-value" th:text="${c.difficulty}">Лёгкая</div>
                        </div>
                        <div class="course-card__stat">
                            <div class="course-card__stat-label">Доступно</div>
                            <div class="course-card__stat-value">Сейчас</div>
                        </div>
                    </div>
                </div>

                <button class="course-card__add"
                        type="button"
                        data-tooltip="добавить в мои курсы"
                        aria-label="Добавить в мои курсы">
                    Добавить
                </button>
            </a>
        </div>
    </div>
</main>
<script>
    document.querySelectorAll('.course-card__badge').forEach(badge => {
      const t = badge.textContent.trim().toLowerCase();

      badge.classList.remove('badge--backend','badge--base','badge--adv','badge--python','badge--data');

      if (t === 'backend') badge.classList.add('badge--backend');
      else if (t === 'base') badge.classList.add('badge--base');
      else if (t === 'advanced') badge.classList.add('badge--adv');
      else if (t === 'python') badge.classList.add('badge--python');
      else if (t === 'data') badge.classList.add('badge--data');
    });
</script>
<script>// Кнопка "Добавить" внутри кликабельной карточки-ссылки: не даём ей открывать курс
document.querySelectorAll('.course-card__add').forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    e.stopPropagation();
    // TODO: тут можно вызвать ваш API/логику добавления курса
    btn.classList.toggle('course-card__add--active');
    btn.textContent = btn.classList.contains('course-card__add--active') ? 'Добавлено' : 'Добавить';
  });
});</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const menu = document.querySelector('.left-menu');
      if (!menu) return;

      const underline = menu.querySelector('.menu-underline');
      if (!underline) return;

      const links = Array.from(menu.querySelectorAll('.menu-item a'));
      const activeLink = menu.querySelector('.menu-item-active a') || links[0];

      function moveTo(link){
        const r = link.getBoundingClientRect();
        const mr = menu.getBoundingClientRect();
        underline.style.width = r.width + 'px';
        underline.style.transform = `translateX(${r.left - mr.left}px)`;
      }

      // Place instantly under active (no animation)
      underline.classList.add('no-anim');
      if (activeLink) moveTo(activeLink);

      // Enable animation after first paint
      requestAnimationFrame(() => {
        underline.classList.remove('no-anim');
      });

      links.forEach(link => {
        link.addEventListener('mouseenter', () => moveTo(link));
        link.addEventListener('focus', () => moveTo(link));
      });

      menu.addEventListener('mouseleave', () => activeLink && moveTo(activeLink));
      window.addEventListener('resize', () => activeLink && moveTo(activeLink));
    });
</script>

</body>
</html>
